{"version":3,"sources":["../../src/core/mainmenu/pages/more/more.module.ts","../../src/core/mainmenu/pages/more/more.ts"],"names":[],"mappings":"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","file":"33.js","sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreMainMenuMorePage } from './more';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreDirectivesModule } from '@directives/directives.module';\n\n@NgModule({\n    declarations: [\n        CoreMainMenuMorePage,\n    ],\n    imports: [\n        CoreComponentsModule,\n        CoreDirectivesModule,\n        IonicPageModule.forChild(CoreMainMenuMorePage),\n        TranslateModule.forChild()\n    ],\n})\nexport class CoreMainMenuPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/mainmenu/pages/more/more.module.ts","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy } from '@angular/core';\nimport { IonicPage, NavController } from 'ionic-angular';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { CoreCustomURLSchemesProvider, CoreCustomURLSchemesHandleError } from '@providers/urlschemes';\nimport { CoreTextUtilsProvider } from '@providers/utils/text';\nimport { CoreUtilsProvider } from '@providers/utils/utils';\nimport { CoreMainMenuDelegate, CoreMainMenuHandlerData } from '../../providers/delegate';\nimport { CoreMainMenuProvider, CoreMainMenuCustomItem } from '../../providers/mainmenu';\nimport { CoreLoginHelperProvider } from '@core/login/providers/helper';\nimport { CoreContentLinksHelperProvider } from '@core/contentlinks/providers/helper';\nimport { TranslateService } from '@ngx-translate/core';\n\n/**\n * Page that displays the list of main menu options that aren't in the tabs.\n */\n@IonicPage({segment: 'core-mainmenu-more'})\n@Component({\n    selector: 'page-core-mainmenu-more',\n    templateUrl: 'more.html',\n})\nexport class CoreMainMenuMorePage implements OnDestroy {\n    handlers: CoreMainMenuHandlerData[];\n    allHandlers: CoreMainMenuHandlerData[];\n    handlersLoaded: boolean;\n    siteInfo: any;\n    siteName: string;\n    logoutLabel: string;\n    showScanQR: boolean;\n    showWeb: boolean;\n    showHelp: boolean;\n    docsUrl: string;\n    customItems: CoreMainMenuCustomItem[];\n    siteUrl: string;\n\n    protected subscription;\n    protected langObserver;\n    protected updateSiteObserver;\n\n    constructor(protected menuDelegate: CoreMainMenuDelegate,\n            protected sitesProvider: CoreSitesProvider,\n            protected navCtrl: NavController,\n            protected mainMenuProvider: CoreMainMenuProvider,\n            eventsProvider: CoreEventsProvider,\n            protected loginHelper: CoreLoginHelperProvider,\n            protected utils: CoreUtilsProvider,\n            protected linkHelper: CoreContentLinksHelperProvider,\n            protected textUtils: CoreTextUtilsProvider,\n            protected urlSchemesProvider: CoreCustomURLSchemesProvider,\n            protected translate: TranslateService) {\n\n        this.langObserver = eventsProvider.on(CoreEventsProvider.LANGUAGE_CHANGED, this.loadSiteInfo.bind(this));\n        this.updateSiteObserver = eventsProvider.on(CoreEventsProvider.SITE_UPDATED, this.loadSiteInfo.bind(this),\n            sitesProvider.getCurrentSiteId());\n        this.loadSiteInfo();\n        this.showScanQR = this.utils.canScanQR() &&\n                !this.sitesProvider.getCurrentSite().isFeatureDisabled('CoreMainMenuDelegate_QrReader');\n    }\n\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n        // Load the handlers.\n        this.subscription = this.menuDelegate.getHandlers().subscribe((handlers) => {\n            this.allHandlers = handlers;\n\n            this.initHandlers();\n        });\n\n        window.addEventListener('resize', this.initHandlers.bind(this));\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        window.removeEventListener('resize', this.initHandlers.bind(this));\n        this.langObserver && this.langObserver.off();\n        this.updateSiteObserver && this.updateSiteObserver.off();\n\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n\n    /**\n     * Init handlers on change (size or handlers).\n     */\n    initHandlers(): void {\n        if (this.allHandlers) {\n            // Calculate the main handlers not to display them in this view.\n            const mainHandlers = this.allHandlers.filter((handler) => {\n                return !handler.onlyInMore;\n            }).slice(0, this.mainMenuProvider.getNumItems());\n\n            // Get only the handlers that don't appear in the main view.\n            this.handlers = this.allHandlers.filter((handler) => {\n                return mainHandlers.indexOf(handler) == -1;\n            });\n\n            this.handlersLoaded = this.menuDelegate.areHandlersLoaded();\n        }\n    }\n\n    /**\n     * Load the site info required by the view.\n     */\n    protected loadSiteInfo(): void {\n        const currentSite = this.sitesProvider.getCurrentSite();\n\n        this.siteInfo = currentSite.getInfo();\n        this.siteName = currentSite.getSiteName();\n        this.siteUrl = currentSite.getURL();\n        this.logoutLabel = this.loginHelper.getLogoutLabel(currentSite);\n        this.showWeb = !currentSite.isFeatureDisabled('CoreMainMenuDelegate_website');\n        this.showHelp = !currentSite.isFeatureDisabled('CoreMainMenuDelegate_help');\n\n        currentSite.getDocsUrl().then((docsUrl) => {\n            this.docsUrl = docsUrl;\n        });\n\n        this.mainMenuProvider.getCustomMenuItems().then((items) => {\n            this.customItems = items;\n        });\n    }\n\n    /**\n     * Open a handler.\n     *\n     * @param handler Handler to open.\n     */\n    openHandler(handler: CoreMainMenuHandlerData): void {\n        this.navCtrl.push(handler.page, handler.pageParams);\n    }\n\n    /**\n     * Open an embedded custom item.\n     *\n     * @param item Item to open.\n     */\n    openItem(item: CoreMainMenuCustomItem): void {\n        this.navCtrl.push('CoreViewerIframePage', {title: item.label, url: item.url});\n    }\n\n    /**\n     * Open app settings page.\n     */\n    openAppSettings(): void {\n        this.navCtrl.push('CoreAppSettingsPage');\n    }\n\n    /**\n     * Open site settings page.\n     */\n    openSitePreferences(): void {\n        this.navCtrl.push('CoreSitePreferencesPage');\n    }\n\n    /**\n     * Scan and treat a QR code.\n     */\n    scanQR(): void {\n        // Scan for a QR code.\n        this.utils.scanQR().then((text) => {\n            if (text) {\n                if (this.urlSchemesProvider.isCustomURL(text)) {\n                    // Is a custom URL scheme, handle it.\n                    this.urlSchemesProvider.handleCustomURL(text).catch((error: CoreCustomURLSchemesHandleError) => {\n                        this.urlSchemesProvider.treatHandleCustomURLError(error);\n                    });\n                } else if (/^[^:]{2,}:\\/\\/[^ ]+$/i.test(text)) { // Check if it's a URL.\n                    // Check if the app can handle the URL.\n                    this.linkHelper.handleLink(text, undefined, this.navCtrl, true, true).then((treated) => {\n                        if (!treated) {\n                            // Can't handle it, open it in browser.\n                            this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(text);\n                        }\n                    });\n                } else {\n                    // It's not a URL, open it in a modal so the user can see it and copy it.\n                    this.textUtils.viewText(this.translate.instant('core.qrscanner'), text, {\n                        displayCopyButton: true,\n                    });\n                }\n            }\n        });\n    }\n\n    /**\n     * Logout the user.\n     */\n    logout(): void {\n        this.sitesProvider.logout();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/mainmenu/pages/more/more.ts"],"sourceRoot":""}